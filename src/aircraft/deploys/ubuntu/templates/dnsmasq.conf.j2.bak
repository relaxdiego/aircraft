# Options: http://www.thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html
interface={{dnsmasq.interface}}
bind-interfaces

{% if dnsmasq.dhcp is not none -%} 
domain={{dnsmasq.domain}}
log-dhcp
dhcp-boot=pxelinux.0
{% for range in dnsmasq.dhcp.ranges -%}
dhcp-range={{dnsmasq.interface}},{{range.start}},{{range.end}},{{dnsmasq.dhcp.subnet.netmask}},2m
{%- endfor %}
dhcp-option=option:router,{{dnsmasq.dhcp.router}}
{%- for dns_server in dnsmasq.dhcp.dns_servers %}
dhcp-option=option:dns-server,{{dns_server}}
{%- endfor %}
{%- endif %}

{% if dnsmasq.tftp is not none -%}
enable-tftp
tftp-root={{dnsmasq.tftp.root_dir}}
{%- endif %}
